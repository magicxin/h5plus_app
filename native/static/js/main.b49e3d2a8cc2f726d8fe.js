(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(t,e,s){"use strict";(function(e){const i=s(85),n={origin:"http://magix.xyz:3000",hostname:"http://magix.xyz:3000",assetsSubDirectory:"static",assetsRoot:i.resolve(e,"../native"),index:"index.html"};i.resolve(e,"../native");t.exports=n}).call(this,"/")},,function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},,,,,,,,,,,,,,,,function(t,e){},function(t,e,s){"use strict";var i=s(9);s.n(i).a},function(t,e,s){"use strict";var i=s(10);s.n(i).a},function(t,e,s){"use strict";var i=s(11);s.n(i).a},function(t,e,s){"use strict";var i=s(12);s.n(i).a},function(t,e,s){"use strict";var i=s(13);s.n(i).a},function(t,e,s){"use strict";var i=s(14);s.n(i).a},function(t,e,s){"use strict";var i=s(15);s.n(i).a},function(t,e,s){"use strict";var i=s(16);s.n(i).a},function(t,e,s){"use strict";var i=s(17);s.n(i).a},function(t,e,s){"use strict";var i=s(18);s.n(i).a},function(t,e,s){"use strict";var i=s(19);s.n(i).a},function(t,e,s){"use strict";var i=s(20);s.n(i).a},function(t,e,s){"use strict";var i=s(21);s.n(i).a},function(t,e,s){"use strict";var i=s(22);s.n(i).a},function(t,e,s){"use strict";var i=s(23);s.n(i).a},function(t,e,s){"use strict";var i=s(24);s.n(i).a},function(t,e,s){"use strict";var i=s(25);s.n(i).a},function(t,e,s){"use strict";var i=s(26);s.n(i).a},function(t,e,s){"use strict";var i=s(27);s.n(i).a},,,,function(t,e,s){},,,,,,,,,,,,,,,,,,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACdklEQVRoQ+2YsW/TUBDG31lVpEwwMSAkmJmZq45MHRCKYGCBjc2D70XKgJni50TK2LFTW6G0EoiNhVbwlzCAulXdUISuepUtRZbdd++cl1Cwlww5vft+353tfAF1yy+45fpVEIDpdPqYiO5Zc5IkOQ1pUhAAY8wcAJ5b4YgYpEdpSpDDOwCPnesmUGfWX7VCaZpu9fv9I6XUR631AWe6EoDxePwoiqIDIno5HA5/cPrYGucKGWM+AcCuUoqI6BUHwhegEP8NAB4Q0c9er/ckjuNfHAgnQJ7nT4nIQvS4ED4Ay+ILwXuI+JYjnjUBW+QLwQVoK54N0AAx0FofS2/iqngi2tdav+Y6L3qRVSbxh4he1EG4fkrUiUfENwBAQQGWJvEZALaUUo0QTUJWKd5rhZYFGWPsU+mkgPi9WCwejkajc457xpgzANi2tXZtpM6LVqgKAQCHSqlniPiFI97WGGPuA8ApEX1vK148gVLsbDa7G8fxBVd8WZdl2R2t9aVk56u9nO8BX3Hrru8A1u144wpNJpMdIkqZgt4h4hmz9sayPM9ZkRMAviZJ8r4RIMuyQRRFH5iiBog4Z9a6ALgvrzkiDv5dgFW4uYkzuqfQJlxf7vn/TkCaYSUZ+6YpiybQJsNKMvZKAdrGQN946rrHvCbQVnwpZpUQbACfDMsJ9TUQjRm79Qr5xkAOgBXFzditAHzFF6mL/fd6ASHO2M4VkmRY7gRKZ9tkbA6Ad4b1BSimtivJ2E4Ae7hvhpUA2D6SjM0CcD2Lq99LAXz72PoOoM61bgIeuxRqhVIA2LE6EPH6M9QVBCCU2LpzO4B1ut1NYNNu1/W/Auoz00AjpQ1nAAAAAElFTkSuQmCC"},function(t,e,s){"use strict";s.r(e);var i=s(2),n=s.n(i),a=(s(43),{name:"App",data:()=>({count:0,username:"",password:""}),created(){},methods:{afterEnter(){this.$refs.loginbox.style.width="100%"},plusReady(){let t=this;plus.key.addEventListener("backbutton",function(){var e=plus.webview.currentWebview();t.$route.meta.exit&&(t.count++,1===t.count&&(t.$toast("再按一次退出"),setTimeout(function(){t.count=0},1500))),t.count>=2&&plus.webview.close(e,"auto")},!1)}}}),o=(s(44),s(3)),r=Object(o.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app","data-theme":this.$root.theme}},[e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view")],1)},[],!1,null,null,null).exports,l=s(32),c={login:"/community_manage/user/login",signout:"/community_manage/user/signout",signin:"/community_manage/user/create",getUser:"/community_manage/user/search",checkUser:"/community_manage/user/check",changeAuth:"/community_manage/user/changeAuth",updateUser:"/community_manage/user/update",resetPassword:"/community_manage/user/reset_pass",createUser:"/community_manage/user/create",saveNews:"/community_manage/news/save",searchNews:"/community_manage/news/search",deleteNews:"/community_manage/news/delete",searchNewsById:"/community_manage/news/searchById",searchHouse:"/community_manage/house/search",saveFix:"/community_manage/fix/save",getFix:"/community_manage/fix/info"},u={props:{offset:{type:Number,default:44},onRefresh:{type:Function,default:void 0,required:!1},onInfinite:{type:Function,default:void 0,require:!1}},data:()=>({top:0,state:0,startY:0,touching:!1,infiniteLoading:!1}),methods:{touchStart(t){this.startY=t.targetTouches[0].pageY,this.touching=!0},mouseDown(t){this.startY=t.pageY,this.touching=!0},touchMove(t){if(this.$el.scrollTop>0||!this.touching)return;let e=t.targetTouches[0].pageY-this.startY;e>0&&t.preventDefault(),this.top=Math.pow(e,.8)+(2===this.state?this.offset:0),2!==this.state&&(this.top>=this.offset?this.state=1:this.state=0)},mouseMove(t){if(this.$el.scrollTop>0||!this.touching)return;let e=t.pageY-this.startY;e>0&&t.preventDefault(),this.top=Math.pow(e,.8)+(2===this.state?this.offset:0),2!==this.state&&(this.top>=this.offset?this.state=1:this.state=0)},touchEnd(t){if(this.touching=!1,2===this.state)return this.state=2,void(this.top=this.offset);this.top>=this.offset?this.refresh():(this.state=0,this.top=0)},mouseUp(t){if(this.touching=!1,2===this.state)return this.state=2,void(this.top=this.offset);this.top>=this.offset?this.refresh():(this.state=0,this.top=0)},refresh(){this.state=2,this.top=this.offset,this.onRefresh(this.refreshDone)},refreshDone(){this.state=0,this.top=0},infinite(){this.infiniteLoading=!0,this.onInfinite(this.infiniteDone)},infiniteDone(){this.infiniteLoading=!1},onScroll(t){if(this.infiniteLoading)return;let e=this.$el.clientHeight;this.$el.querySelector(".scroll-inner").clientHeight-e-this.$el.scrollTop-(this.onRefresh?this.$el.querySelector(".pull-to-refresh-layer").clientHeight:0)<this.$el.querySelector(".infinite-layer").clientHeight&&this.infinite()}}},h=(s(45),Object(o.a)(u,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scroll",class:{"pull-down":0===t.state,"pull-up":1===t.state,refreshing:2===t.state,touching:t.touching},on:{touchstart:function(e){t.onRefresh&&t.touchStart(e)},touchmove:function(e){t.onRefresh&&t.touchMove(e)},touchend:function(e){t.onRefresh&&t.touchEnd(e)},mousedown:function(e){t.onRefresh&&t.mouseDown(e)},mousemove:function(e){t.onRefresh&&t.mouseMove(e)},mouseup:function(e){t.onRefresh&&t.mouseUp(e)},scroll:function(e){(t.onInfinite||t.infiniteLoading)&&t.onScroll(e)}}},[s("div",{staticClass:"scroll-inner",style:{transform:"translate3d(0, "+t.top+"px, 0)",webkitTransform:"translate3d(0, "+t.top+"px, 0)"}},[t.onRefresh?s("div",{staticClass:"pull-to-refresh-layer"},[t._t("refresh",[s("div",{staticClass:"preloader"}),t._v(" "),s("div",{staticClass:"pull-to-refresh-arrow"}),t._v(" "),s("span",{staticClass:"label-down"},[t._v("下拉刷新")]),t._v(" "),s("span",{staticClass:"label-up"},[t._v("释放刷新")]),t._v(" "),s("span",{staticClass:"label-refresh"},[t._v("正在刷新..")])])],2):t._e(),t._v(" "),t._t("default"),t._v(" "),t.onInfinite?s("div",{staticClass:"infinite-layer"},[t._t("infinite",[s("div",{staticClass:"infinite-preloader"}),t._v(" "),s("span",{staticClass:"label-loading"},[t._v("正在加载..")])])],2):t._e()],2)])},[],!1,null,"1f9e3fc5",null).exports),d={name:"empty",data:()=>({}),props:{text:{type:String,default:"在这个星球找不到"}},methods:{}},m=(s(46),Object(o.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"empty"},[e("span",{staticClass:"text"},[this._v(this._s(this.text))])])},[],!1,null,"6e5c65ed",null).exports);function p(t){return new Promise((e,s)=>{this.$get(c.searchNews,{params:t}).then(t=>{e(t)}).catch(t=>{s(t)})})}var v={name:"newslist",components:{jcLoadmore:h,jcEmpty:m},data:()=>({newsList:[],index:0,count:5,finished:!1}),props:{type:{type:String,default:"all",validator:t=>["","1","2"].indexOf(t)>-1}},created(){p.bind(this)({type:this.type,count:this.count,index:this.index}).then(t=>{console.log(t.news),this.newsList=t.news,t.length===this.newsList.length&&(this.finished=!0)})},mounted(){},methods:{plusReady(){},loadmore(t){this.finished||(this.index++,this.getNewsList({type:this.type,count:this.count,index:this.index}).then(e=>{this.newsList=this.newsList.concat(e.news),e.length===this.newsList.length&&(this.finished=!0),t()}))},refresh(t){this.finished=!1,this.getNewsList().then(e=>{this.newsList=e.news,t()})},getNewsList(t){return this.isLoading=!0,new Promise((e,s)=>{p.bind(this)(t).then(e).catch(s)})},routeTo(t){console.log(t),this.$router.push({name:"news_detail",params:{_id:t}})}},activated(){this.$refs.scroll.$el.scrollTop=this.$refs.scroll.$el.dataset.top}},f=(s(47),{name:"news",components:{newsList:Object(o.a)(v,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"newslist"},[s("jc-loadmore",{directives:[{name:"scroll",rawName:"v-scroll"}],ref:"scroll",staticClass:"list-container",attrs:{onRefresh:t.refresh,onInfinite:t.loadmore}},[t._l(t.newsList,function(e,i){return s("div",{key:i,staticClass:"card flex-column",on:{click:function(s){return t.routeTo(e._id)}}},[s("section",{staticClass:"flex-row"},[s("div",{staticClass:"title-container"},[s("header",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"sub"},[t._v(t._s(e.sub))])]),t._v(" "),s("div",{staticClass:"image-container"},[s("img",{directives:[{name:"load",rawName:"v-load"}],attrs:{src:e.images[0]}})])]),t._v(" "),s("footer",{staticClass:"footer"},[s("div",[s("van-icon",{staticClass:"icon-author",attrs:{name:"contact"}}),t._v(" "),s("span",[t._v(t._s(e.user&&e.user.nickname))])],1),t._v(" "),s("time",[t._v(t._s(t._f("timeFormat")(e.meta.createAt)))])])])}),t._v(" "),t.finished?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2),t._v(" "),0===t.newsList.length?s("jc-empty"):t._e()],1)},[],!1,null,"12d1dabf",null).exports},data:()=>({tabs:[{title:"推荐",type:""},{title:"租赁",type:"1"},{title:"新鲜事",type:"2"}],swipe:0}),created(){},mounted(){},methods:{routeTo(){this.$router.push("search")}},activated(){this.$refs.$scrolltop.forEach((t,e)=>{t.$el.scrollTop=t.$el.dataset.top})}}),_=(s(48),Object(o.a)(f,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news"},[s("van-nav-bar",{staticClass:"header",attrs:{title:"资讯"}}),t._v(" "),s("van-tabs",{attrs:{swipeable:""},model:{value:t.swipe,callback:function(e){t.swipe=e},expression:"swipe"}},t._l(t.tabs,function(t,e){return s("van-tab",{directives:[{name:"scroll",rawName:"v-scroll"}],key:e,ref:"$scrolltop",refInFor:!0,staticClass:"tab-container",attrs:{title:t.title}},[s("news-list",{attrs:{type:t.type}})],1)}),1)],1)},[],!1,null,"a48e7b64",null).exports),w={name:"property-center",data:()=>({}),created(){},mounted(){},activated(){console.log("activated")},methods:{routeTo(t){this.$router.push(t)}}},b=(s(49),Object(o.a)(w,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"property-center"},[s("van-nav-bar",{attrs:{title:"物业"}}),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"property-item red",on:{click:function(e){return t.routeTo("house_info")}}},[s("van-icon",{attrs:{name:"info",size:"2rem"}}),t._v(" "),s("span",[t._v("信息查询")])],1),t._v(" "),s("div",{staticClass:"property-item blue",on:{click:function(e){return t.routeTo("news_create")}}},[s("van-icon",{attrs:{name:"add-square",size:"2rem"}}),t._v(" "),s("span",[t._v("创建资讯")])],1),t._v(" "),s("div",{staticClass:"property-item grey"},[s("van-icon",{attrs:{name:"bell",size:"2rem"},on:{click:function(e){return t.routeTo("fix_post")}}}),t._v(" "),s("span",[t._v("报修")])],1)])],1)},[],!1,null,null,null).exports),g={name:"user-center",data(){return{user:this.$store.state.admin.user}},created(){},methods:{toggleTheme(){this.$root.theme="theme1"===this.$root.theme?"theme":"theme1"},signout(){this.$store.commit("admin/updateUser",null),this.$toast("请重新登录！"),this.$router.push("signin")}}},y=(s(50),Object(o.a)(g,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-center"},[s("div",{staticClass:"user-background"},[s("div",{staticClass:"user-cell",on:{click:function(e){return t.$router.push("user-info")}}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.addPath(t.user.avatar)}})]),t._v(" "),s("div",{staticClass:"nickname"},[t._v(t._s(t.user.nickname))]),t._v(" "),s("div",{staticClass:"icon flex-row flex-center"},[s("van-icon",{attrs:{name:"arrow"}})],1)])]),t._v(" "),s("div",{staticClass:"bold-line"}),t._v(" "),s("van-cell",{attrs:{title:"我的动态","is-link":"",to:"dynamic"}}),t._v(" "),s("div",{staticClass:"bold-line"}),t._v(" "),s("van-cell",{attrs:{title:"我的房屋","is-link":"",to:"house_info"}}),t._v(" "),s("div",{staticClass:"bold-line"}),t._v(" "),s("van-cell",{attrs:{title:"修改密码","is-link":"",to:"reset-password"}}),t._v(" "),s("div",{staticClass:"bold-line"}),t._v(" "),s("van-button",{staticClass:"btn",attrs:{size:"large",type:"primary"},on:{click:t.signout}},[t._v("退出登录")])],1)},[],!1,null,null,null).exports),x={name:"hello",components:{news:_,propertyCenter:b,userCenter:y},data:()=>({active:0,showPop:!1,showEditor:!1,page:[_.name,b.name,y.name]}),mounted(){},methods:{popup(){this.showPop=!0},close(){this.showEditor=!1},edit(){this.showEditor=!0,this.showPop=!1}}},k=(s(51),Object(o.a)(x,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s(t.page[t.active],{tag:"component"}),t._v(" "),s("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-tabbar-item",{attrs:{icon:"shop"}},[t._v("资讯")]),t._v(" "),s("van-tabbar-item",{attrs:{icon:"chat"}},[t._v("物业")]),t._v(" "),s("van-tabbar-item",{attrs:{icon:"gold-coin"}},[t._v("我的")])],1)],1)},[],!1,null,null,null).exports);function $(t){return new Promise((e,s)=>{this.$post(c.saveFix,t).then(t=>{e(t)}).catch(t=>{s(t)})})}var C={name:"fix_post",data(){return{user:this.$store.state.admin.user,house:{address:"",phoneNumber:"",truble:"",userId:this.$store.state.admin.user._id}}},created(){this.init()},activated(){console.log("activated")},methods:{init(t){(function(t){return new Promise((e,s)=>{this.$get(c.getFix,{params:t}).then(t=>{e(t)}).catch(t=>{s(t)})})}).bind(this)(Object.assign({},t,{userId:this.user._id})).then(t=>{t.fix.length>0&&(this.house=t.fix[0])})},submit(){$.bind(this)(this.house).then(t=>{this.$toast("提交成功！")}).catch(t=>{this.$toast(t.message)})},complete(){$.bind(this)({fixId:this.house._id,statu:"2"}).then(t=>{this.$toast("完成维修！"),this.$router.back()})}}},A=(s(52),Object(o.a)(C,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fix-post"},[s("van-nav-bar",{attrs:{"left-arrow":"",title:"报修"},on:{"click-left":function(e){return t.$router.back()}}}),t._v(" "),s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",placeholder:"请输入",label:"住址"},model:{value:t.house.address,callback:function(e){t.$set(t.house,"address",e)},expression:"house.address"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",placeholder:"请输入",label:"联系电话"},model:{value:t.house.phoneNumber,callback:function(e){t.$set(t.house,"phoneNumber",e)},expression:"house.phoneNumber"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",placeholder:"请输入",label:"问题描述",type:"textarea",autosize:""},model:{value:t.house.truble,callback:function(e){t.$set(t.house,"truble",e)},expression:"house.truble"}}),t._v(" "),t.house&&"0"===t.house.statu?s("van-button",{staticClass:"mt-20",attrs:{size:"large",type:"primary",disabled:""},on:{click:t.submit}},[t._v("审核中")]):t._e(),t._v(" "),t.house&&"1"===t.house.statu?s("van-button",{staticClass:"mt-20",attrs:{size:"large",type:"primary"},on:{click:t.complete}},[t._v("完成")]):t._e(),t._v(" "),t.house&&"2"===t.house.statu?s("van-button",{staticClass:"mt-20",attrs:{size:"large",type:"primary"},on:{click:t.submit}},[t._v("提交")]):t._e()],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"header"},[e("div",{staticClass:"border-line"}),this._v(" "),e("span",[this._v("报修信息")])])}],!1,null,null,null).exports),L={name:"fix_list",components:{jcLoadmore:h,jcEmpty:m},data(){return{user:this.$store.state.admin.user,newsList:[],index:0,count:5,finished:!1,type:""}},created(){p.bind(this)({type:this.type,count:this.count,index:this.index,userId:this.user._id}).then(t=>{console.log(t.news),this.newsList=t.news,t.length===this.newsList.length&&(this.finished=!0)})},mounted(){},methods:{plusReady(){},loadmore(t){this.finished||(this.index++,this.getNewsList({type:this.type,count:this.count,index:this.index,userId:this.user._id}).then(e=>{this.newsList=this.newsList.concat(e.news),e.length===this.newsList.length&&(this.finished=!0),t()}))},refresh(t){this.finished=!1,this.getNewsList({type:this.type,count:this.count,index:this.index,userId:this.user._id}).then(e=>{this.newsList=e.news,t()})},getNewsList(t){return this.isLoading=!0,new Promise((e,s)=>{p.bind(this)(t).then(e).catch(s)})},routeTo(t){console.log(t),this.$router.push({name:"news_detail",params:{_id:t}})}},activated(){this.$refs.scroll.$el.scrollTop=this.$refs.scroll.$el.dataset.top}},N=(s(53),Object(o.a)(L,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"fix-list"},[s("van-nav-bar",{attrs:{title:"我的动态","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),t._v(" "),s("jc-loadmore",{directives:[{name:"scroll",rawName:"v-scroll"}],ref:"scroll",staticClass:"list-container",attrs:{onRefresh:t.refresh,onInfinite:t.loadmore}},[t._l(t.newsList,function(e,i){return s("div",{key:i,staticClass:"card flex-column",on:{click:function(s){return t.routeTo(e._id)}}},[s("section",{staticClass:"flex-row"},[s("div",{staticClass:"title-container"},[s("header",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"sub"},[t._v(t._s(e.sub))])]),t._v(" "),s("div",{staticClass:"image-container"},[s("img",{directives:[{name:"load",rawName:"v-load"}],attrs:{src:e.images[0]}})])]),t._v(" "),s("footer",{staticClass:"footer"},[s("div",[s("van-icon",{staticClass:"icon-author",attrs:{name:"contact"}}),t._v(" "),s("span",[t._v(t._s(e.user.nickname))])],1),t._v(" "),s("time",[t._v(t._s(t._f("timeFormat")(e.meta.createAt)))])])])}),t._v(" "),t.finished?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2),t._v(" "),0===t.newsList.length?s("jc-empty"):t._e()],1)},[],!1,null,"6400f644",null).exports),E=(Object(o.a)({},void 0,void 0,!1,null,null,null).exports,{name:"launch"});s(54),Object(o.a)(E,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"launch"},[this._v("\n\t我"),e("br"),this._v("是"),e("br"),this._v("启"),e("br"),this._v("动"),e("br"),this._v("页\n")])}],!1,null,null,null).exports;var P={name:"news_detail",data:()=>({news:""}),created(){(function(t){return new Promise((e,s)=>{this.$get(c.searchNewsById,{params:t}).then(t=>{e(t)}).catch(t=>{s(t)})})}).bind(this)({_id:this.$route.params._id}).then(t=>{this.news=t})},methods:{routeTo(){this.$router.back()}}},I=(s(55),Object(o.a)(P,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news-detail"},[s("van-nav-bar",{attrs:{title:"详情","left-arrow":""},on:{"click-left":t.routeTo}}),t._v(" "),s("div",{staticClass:"container"},[s("header",{staticClass:"title"},[t._v(t._s(t.news.title))]),t._v(" "),s("div",{staticClass:"tool-item"},[s("span",{staticClass:"author"},[t._v(t._s(t.news.user&&t.news.user.nickname))]),t._v(" "),s("time",{staticClass:"date"},[t._v(t._s(t._f("timeFormat")(t.news.meta&&t.news.meta.createAt)))])]),t._v(" "),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.news.content)}})])],1)},[],!1,null,null,null).exports);var T={name:"news_create",data(){return{user:this.$store.state.admin.user,form:"",isShowPicker:!1,types:[{text:"租赁",value:"1"},{text:"新鲜事",value:"2"}]}},created(){console.log(this.user),this.initForm()},mounted(){},methods:{initForm(t){this.form={title:t&&t.title||"",sub:t&&t.sub||"",content:t&&t.content||"",type:t&&t.type||"",userId:this.user._id}},onClickLeft(){this.$router.back()},submit(){console.log(this.form),function(t){return new Promise((e,s)=>{this.$post(c.saveNews,t).then(t=>{e(t)}).catch(t=>{s(t)})})}.bind(this)(this.form).then(t=>{console.log(t),this.$toast("创建成功！"),this.$router.back()})},showPicker(){this.isShowPicker=!0},onChange(t){console.log(t)},cancel(){this.isShowPicker=!1},confirm(t){console.log(t),this.form.type=t.value,this.isShowPicker=!1}},activated(){this.$refs.$scrolltop.forEach((t,e)=>{t.$el.scrollTop=t.$el.dataset.top})}},S=(s(56),Object(o.a)(T,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news-create"},[s("van-nav-bar",{attrs:{"left-arrow":"",title:"创建资讯"},on:{"click-left":t.onClickLeft}}),t._v(" "),s("van-cell-group",[s("van-field",{attrs:{label:"标题",placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),s("van-field",{attrs:{label:"副标题",placeholder:"请输入副标题"},model:{value:t.form.sub,callback:function(e){t.$set(t.form,"sub",e)},expression:"form.sub"}}),t._v(" "),s("van-field",{attrs:{label:"内容",placeholder:"请输入内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),s("van-field",{attrs:{label:"类型",placeholder:"请选择类型",readonly:""},on:{click:t.showPicker},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),t._v(" "),s("van-popup",{staticClass:"pop-container",attrs:{position:"bottom"},model:{value:t.isShowPicker,callback:function(e){t.isShowPicker=e},expression:"isShowPicker"}},[s("van-picker",{attrs:{columns:t.types,"show-toolbar":""},on:{change:t.onChange,cancel:t.cancel,confirm:t.confirm}})],1),t._v(" "),s("van-button",{staticClass:"submit",attrs:{size:"large",type:"danger"},on:{click:t.submit}},[t._v("提交")])],1)},[],!1,null,null,null).exports);var j={name:"house_info",data(){return{house:{},user:this.$store.state.admin.user}},created(){(function(t){return new Promise((e,s)=>{this.$get(c.searchHouse,{params:t}).then(t=>{e(t)}).catch(t=>{s(t)})})}).bind(this)({userId:this.user._id}).then(t=>{this.house=t.house,console.log(t)}).catch(t=>{this.$toast(t.message)})},activated(){console.log("activated")},methods:{onClickLeft(){this.$router.back()}}},R=(s(57),Object(o.a)(j,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"house-info"},[s("van-nav-bar",{attrs:{"left-arrow":"",title:"物业"},on:{"click-left":t.onClickLeft}}),t._v(" "),s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",label:"小区",readonly:""},model:{value:t.house.community,callback:function(e){t.$set(t.house,"community",e)},expression:"house.community"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",label:"栋",readonly:""},model:{value:t.house.building,callback:function(e){t.$set(t.house,"building",e)},expression:"house.building"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",label:"单元",readonly:""},model:{value:t.house.unit,callback:function(e){t.$set(t.house,"unit",e)},expression:"house.unit"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",label:"室",readonly:""},model:{value:t.house.room,callback:function(e){t.$set(t.house,"room",e)},expression:"house.room"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"contact",label:"加密编号",readonly:""},model:{value:t.house.numbered,callback:function(e){t.$set(t.house,"numbered",e)},expression:"house.numbered"}})],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"header"},[e("div",{staticClass:"border-line"}),this._v(" "),e("span",[this._v("房屋信息")])])}],!1,null,null,null).exports),U={name:"App",data:()=>({count:0,username:"",password:""}),created(){},methods:{afterEnter(){this.$refs.loginbox.style.width="100%"},plusReady(){let t=this;plus.key.addEventListener("backbutton",function(){var e=plus.webview.currentWebview();t.$route.meta.exit&&(t.count++,1===t.count&&(t.$toast("再按一次退出"),setTimeout(function(){t.count=0},1500))),t.count>=2&&plus.webview.close(e,"auto")},!1)},cancel(){this.$root.showLoginBox=!1},login(){this.$post(c.login,{password:this.password,username:this.username}).then(t=>{this.$store.commit("admin/updateUser",t),this.$router.push("main")}).catch(t=>{this.$toast(t.message)})},signup(){this.$router.push("signup")}}},O=(s(58),Object(o.a)(U,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signin"},[s("van-nav-bar",{attrs:{title:"登录"}}),t._v(" "),s("div",{ref:"loginbox",staticClass:"login-box"},[s("van-cell-group",{staticClass:"form-box"},[s("van-field",{attrs:{required:"",clearable:"",label:"用户名",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),s("van-field",{staticClass:"mb-14",attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),s("div",{on:{click:t.signup}},[t._v("用户注册")]),t._v(" "),s("van-button",{staticClass:"mb-14",attrs:{size:"large",type:"danger"},on:{click:t.login}},[t._v("登录")])],1)],1)],1)},[],!1,null,null,null).exports),F={name:"App",data:()=>({count:0,username:"",password:"",repass:""}),created(){},methods:{afterEnter(){this.$refs.loginbox.style.width="100%"},plusReady(){let t=this;plus.key.addEventListener("backbutton",function(){var e=plus.webview.currentWebview();t.$route.meta.exit&&(t.count++,1===t.count&&(t.$toast("再按一次退出"),setTimeout(function(){t.count=0},1500))),t.count>=2&&plus.webview.close(e,"auto")},!1)},cancel(){this.$root.showLoginBox=!1},submit(){this.$post(this.addHost(c.createUser),{username:this.username,password:this.password,pass:this.repass}).then(t=>{this.$toast("注册成功！"),this.$router.push("login")}).catch(t=>{this.$toast(t.message)})}}},q=(s(59),Object(o.a)(F,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signup"},[s("van-nav-bar",{attrs:{title:"注册"}}),t._v(" "),s("div",{ref:"loginbox",staticClass:"login-box"},[s("van-cell-group",{staticClass:"form-box"},[s("van-field",{attrs:{required:"",clearable:"",label:"用户名",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),s("van-field",{attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),s("van-field",{staticClass:"mb-14",attrs:{type:"repass",label:"确认密码",placeholder:"请输入密码",required:""},model:{value:t.repass,callback:function(e){t.repass=e},expression:"repass"}}),t._v(" "),s("van-button",{staticClass:"mb-14",attrs:{size:"large",type:"danger"},on:{click:t.submit}},[t._v("注册")])],1)],1)],1)},[],!1,null,null,null).exports),Y={name:"user-info",data(){return{user:this.$store.state.admin.user,old_pass:"",carNumber:"",address:"",nickname:"",phoneNumber:""}},created(){console.log(this.user),this.init(this.user)},methods:{init(t){this.carNumber=t.carNumber,this.nickname=t.nickname,this.phoneNumber=t.phoneNumber},save(){this.$post(c.updateUser,{username:this.user.username,nickname:this.nickname,phoneNumber:this.phoneNumber}).then(t=>{this.$toast("修改成功！")})}}},z=(s(60),Object(o.a)(Y,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-info"},[s("van-nav-bar",{attrs:{title:"用户中心","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),t._v(" "),s("van-field",{staticClass:"field",attrs:{type:"text",label:"用户名"},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}}),t._v(" "),s("van-field",{staticClass:"field",attrs:{type:"text",label:"昵称"},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),t._v(" "),s("van-field",{staticClass:"field",attrs:{type:"text",label:"车牌号"},model:{value:t.carNumber,callback:function(e){t.carNumber=e},expression:"carNumber"}}),t._v(" "),s("van-field",{staticClass:"field",attrs:{type:"text",label:"电话"},model:{value:t.phoneNumber,callback:function(e){t.phoneNumber=e},expression:"phoneNumber"}}),t._v(" "),s("van-button",{staticClass:"btn",attrs:{size:"large",type:"primary"},on:{click:t.save}},[t._v("保存")])],1)},[],!1,null,null,null).exports);var D={name:"reset-password",data(){return{user:this.$store.state.admin.user,old_pass:"",new_pass:"",new_repass:""}},created(){},methods:{save(){(function(t){return new Promise((e,s)=>{this.$post(c.resetPassword,t).then(t=>{e(t)}).catch(t=>{s(t)})})}).bind(this)({old_pass:this.old_pass,new_pass:this.new_pass,new_repass:this.new_repass,username:this.user.username}).then(t=>{this.$toast("修改成功！"),this.$store.commit("admin/updateUser",null),this.$router.replace("login")}).catch(t=>{})},routeTo(){this.$router.back()}}},M=(s(61),Object(o.a)(D,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reset-password"},[s("van-nav-bar",{attrs:{title:"修改密码","left-arrow":""},on:{"click-left":t.routeTo}}),t._v(" "),s("van-field",{staticClass:"field",attrs:{type:"password",label:"密码",placeholder:"请输入密码",required:""},model:{value:t.old_pass,callback:function(e){t.old_pass=e},expression:"old_pass"}}),t._v(" "),s("van-field",{staticClass:"field",attrs:{type:"password",label:"新密码",placeholder:"请输入新密码",required:""},model:{value:t.new_pass,callback:function(e){t.new_pass=e},expression:"new_pass"}}),t._v(" "),s("van-field",{staticClass:"field",attrs:{type:"password",label:"重复",placeholder:"请输入新密码",required:""},model:{value:t.new_repass,callback:function(e){t.new_repass=e},expression:"new_repass"}}),t._v(" "),s("van-button",{staticClass:"btn",attrs:{size:"large",type:"primary"},on:{click:t.save}},[t._v("保存")])],1)},[],!1,null,null,null).exports),B={name:"dynamic",components:{jcLoadmore:h,jcEmpty:m},data(){return{user:this.$store.state.admin.user,newsList:[],index:0,count:5,finished:!1,type:""}},created(){p.bind(this)({type:this.type,count:this.count,index:this.index,userId:this.user._id}).then(t=>{console.log(t.news),this.newsList=t.news,t.length===this.newsList.length&&(this.finished=!0)})},mounted(){},methods:{plusReady(){},loadmore(t){this.finished||(this.index++,this.getNewsList({type:this.type,count:this.count,index:this.index,userId:this.user._id}).then(e=>{this.newsList=this.newsList.concat(e.news),e.length===this.newsList.length&&(this.finished=!0),t()}))},refresh(t){this.finished=!1,this.getNewsList({type:this.type,count:this.count,index:this.index,userId:this.user._id}).then(e=>{this.newsList=e.news,t()})},getNewsList(t){return this.isLoading=!0,new Promise((e,s)=>{p.bind(this)(t).then(e).catch(s)})},routeTo(t){console.log(t),this.$router.push({name:"news_detail",params:{_id:t}})}},activated(){this.$refs.scroll.$el.scrollTop=this.$refs.scroll.$el.dataset.top}},H=(s(62),Object(o.a)(B,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dynamic"},[s("van-nav-bar",{attrs:{title:"我的动态","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),t._v(" "),s("jc-loadmore",{directives:[{name:"scroll",rawName:"v-scroll"}],ref:"scroll",staticClass:"list-container",attrs:{onRefresh:t.refresh,onInfinite:t.loadmore}},[t._l(t.newsList,function(e,i){return s("div",{key:i,staticClass:"card flex-column",on:{click:function(s){return t.routeTo(e._id)}}},[s("section",{staticClass:"flex-row"},[s("div",{staticClass:"title-container"},[s("header",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"sub"},[t._v(t._s(e.sub))])]),t._v(" "),s("div",{staticClass:"image-container"},[s("img",{directives:[{name:"load",rawName:"v-load"}],attrs:{src:e.images[0]}})])]),t._v(" "),s("footer",{staticClass:"footer"},[s("div",[s("van-icon",{staticClass:"icon-author",attrs:{name:"contact"}}),t._v(" "),s("span",[t._v(t._s(e.user.nickname))])],1),t._v(" "),s("time",[t._v(t._s(t._f("timeFormat")(e.meta.createAt)))])])])}),t._v(" "),t.finished?s("div",{staticClass:"text-center",attrs:{slot:"infinite"},slot:"infinite"},[t._v("没有更多数据")]):t._e()],2),t._v(" "),0===t.newsList.length?s("jc-empty"):t._e()],1)},[],!1,null,"34b4b2c0",null).exports);n.a.use(l.a);var Q=new l.a({routes:[{path:"/",redirect:"/main"},{path:"/main",name:"main",component:k,meta:{exit:!0,keepAlive:!0},children:[{path:"news",name:"news",component:_,meta:{exit:!0,keepAlive:!1}},{path:"property_center",name:"property_center",component:b,meta:{exit:!0,keepAlive:!1}},{path:"user_center",name:"user_center",component:y,meta:{exit:!0,keepAlive:!1}}]},{path:"/house_info",name:"house_info",component:R,meta:{exit:!0,keepAlive:!1}},{path:"/news_detail/:_id",name:"news_detail",component:I,meta:{exit:!0,keepAlive:!1}},{path:"/news_create",name:"news_create",component:S,meta:{exit:!0,keepAlive:!1}},{path:"/signin",name:"signin",component:O,meta:{exit:!0,keepAlive:!1}},{path:"/signup",name:"signup",component:q,meta:{exit:!0,keepAlive:!1}},{path:"/user-info",name:"user-info",component:z,meta:{exit:!0,keepAlive:!1}},{path:"/reset-password",name:"reset-password",component:M,meta:{exit:!0,keepAlive:!1}},{path:"/dynamic",name:"dynamic",component:H,meta:{exit:!0,keepAlive:!1}},{path:"/fix_post",name:"fix_post",component:A,meta:{exit:!0,keepAlive:!1}},{path:"/fix_list",name:"fix_list",component:N,meta:{exit:!0,keepAlive:!1}}]}),W=s(42),V=s(40),J=s.n(V),G=s(33);var Z={namespaced:!0,state:{user:JSON.parse(window.localStorage.getItem("user"))},mutations:{updateUser(t,e){window.localStorage.setItem("user",JSON.stringify(e)),t.user=JSON.parse(window.localStorage.getItem("user"))},signout(t){Q.replace("login"),t.user=null,window.localStorage.removeItem("user")}}};n.a.use(G.a);var K=new G.a.Store({modules:{admin:Z}}),X=s(41),tt=s.n(X),et=(s(65),s(66),s(29)),st=s.n(et),it={900:"后台错误",500:"请输入检索内容"},nt=s(7),at=s.n(nt);n.a.$axios=n.a.prototype.$axios=st.a,n.a.$get=n.a.prototype.$get=function(t,e){return new Promise((s,i)=>{n.a.$axios.get(at.a.hostname+t,e).then(t=>{200===t.data.code?s(t.data.data):i({code:t.data.code,message:it[t.data.code]||t.data.message})})})},n.a.$post=n.a.prototype.$post=function(t,e){return new Promise((s,i)=>{n.a.$axios.post(at.a.hostname+t,e).then(t=>{200===t.data.code?s(t.data.data):i({code:t.data.code,message:it[t.data.code]||t.data.message})})})},n.a.filter("timeFormat",function(t){let e=new Date(t);return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()});var ot={plusReady:function(t){window.plus?t():document.addEventListener("plusready",t,!1)},listenNetwork:function(t){document.addEventListener("netchange",t,!1)}};const rt={plus:!1,stream:!1,wechat:!1,android:!1,iphone:!1,ipad:!1,version:""};let lt=navigator.userAgent,ct=lt.match(/Html5Plus/i),ut=lt.match(/StreamApp/i),ht=lt.match(/(MicroMessenger)\/([\d.]+)/i),dt=lt.match(/(Android);?[\s\/]+([\d.]+)?/),mt=lt.match(/(iPhone\sOS)\s([\d_]+)/),pt=lt.match(/(iPad).*OS\s([\d_]+)/);ct&&(rt.plus=!0),ut&&(rt.stream=!0),ht&&(rt.wechat=!0),dt&&(rt.android=!0,rt.version=dt[2],rt.isBadAndroid=!/Chrome\/\d/.test(window.navigator.appVersion)),mt&&(rt.ios=rt.iphone=!0,rt.version=mt[2].replace(/_/g,".")),pt&&(rt.ios=rt.ipad=!0,rt.version=pt[2].replace(/_/g,"."));var vt=rt,ft={toast(t,e,s){let i={};return i.duration=e||"short",i.verticalAlign=s||"bottom",window.plus.nativeUI.toast(t,i)},alert:(t,e,s,i)=>window.plus.nativeUI.alert(t,e,s,i),confirm:(t,e,s,i)=>window.plus.nativeUI.confirm(t,e,s,i),prompt:(t,e,s,i,n)=>window.plus.nativeUI.prompt(t,e,s,i,n),actionSheet:(t,e)=>window.plus.nativeUI.actionSheet(t,e)};var _t={getCurrentAcceleration:()=>new Promise(function(t,e){window.plus.accelerometer.getCurrentAcceleration(e=>{t(e)},t=>{e(t)})}),watchAcceleration:t=>new Promise(function(e,s){window.plus.accelerometer.watchAcceleration(t=>{e(t)},t=>{s(t)},t||{})}),clearWatch:t=>{window.plus.accelerometer.clearWatch(t)}};var wt={getCurrentPosition:t=>new Promise((e,s)=>{window.plus.geolocation.getCurrentPosition(t=>{e(t)},t=>{s(t)},t||{})}),watchPosition:t=>new Promise((e,s)=>{window.plus.geolocation.watchPosition(t=>{e(t)},t=>{s(t)},t||{})}),clearWatch:t=>{window.plus.geolocation.clearWatch(t)}};var bt={getCurrentNetworkType:()=>{let t=["UNKNOW","NONE","ETHERNET","WIFI","2G","3G","4G"];return vt.plus?t[window.plus.networkinfo.getCurrentType()]:null}};const gt=t=>Object.prototype.toString.call(t).slice(8,-1).toLowerCase();Array.isArray;var yt=t=>"function"===gt(t);const xt={};xt.install=(t=>{t.mixin({beforeCreate(){if(vt.plus){let t=this.$options;ot.plusReady(function(){yt(t.plusReady)&&t.plusReady.call(this),yt(t.listenNetwork)&&ot.listenNetwork(function(){t.listenNetwork.call(this)})}.bind(this))}}}),t.prototype.$plusReady=ot.plusReady,t.prototype.$os=vt,t.prototype.$nativeUI=ft,t.prototype.$accelerometer=_t,t.prototype.$geolocation=wt,t.prototype.$networkinfo=bt}),"undefined"!=typeof window&&window.Vue&&window.Vue.use(xt);var kt=xt;n.a.directive("focus",{inserted:function(t){t.focus()}});s(86);n.a.directive("load",{bind:function(t){let e=new Image;e.src=t.src,e.onload=function(){t.style.display="block",t.src=t.dataset.url},t.dataset.url=t.src,t.removeAttribute("src"),t.style.display="none"},componentUpdated:function(t){}}),n.a.directive("scroll",{bind(t){t.addEventListener("scroll",function(e){t.dataset.top=e.target.scrollTop})}}),n.a.$axios=n.a.prototype.$axios=st.a,n.a.use(kt),n.a.mixin({methods:{routeLogin(){this.$root.showLoginBox=!0},addPath:t=>at.a.origin+t,addHost:t=>at.a.hostname+t}});new tt.a;n.a.config.productionTip=!1,n.a.use(W.a),J.a.attach(document.body),Q.beforeEach((t,e,s)=>{K.state.admin.user?s():"signin"===t.name||"signup"===t.name?s():Q.push("signin")}),new n.a({el:"#app",router:Q,components:{App:r},store:K,template:"<App/>",data:()=>({theme:"theme",isLogin:!1,showLoginBox:!1,user:""})})}],[[87,1,2]]]);